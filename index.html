<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>One Piece Card Collection</title>
<link rel="icon" href="favicon.jpg" type="image/jpeg">
<style>
:root {
    --pirate-bg: linear-gradient(180deg, #fca311, #e85d04, #d00000);
    --marine-bg: linear-gradient(180deg, #1e3d59, #3f88c5, #f5f0e1);
    --light-text: #fff;
    --dark-text: #111;
    --accent-red: #d90429;
    --accent-gold: #ffd700;
}
*{box-sizing:border-box;margin:0;padding:0;}
body{font-family:'Montserrat',sans-serif;min-height:100vh;background:var(--pirate-bg);color:var(--light-text);transition:background 0.4s ease,color 0.3s ease;}
body.marine{background:var(--marine-bg);color:var(--dark-text);}

/* Home Header */
.home-header{text-align:center;padding:48px 20px;}
.home-header h1{font-size:clamp(2rem,5vw,2.8rem);margin-bottom:10px;}
.home-header p{max-width:700px;margin:0 auto 20px;font-size:1.1rem;}
.header-btns{display:flex;justify-content:center;gap:14px;flex-wrap:wrap;margin-bottom:16px;}
.btn{padding:10px 20px;border-radius:14px;border:none;font-weight:600;cursor:pointer;transition:0.3s;}
.btn-primary{background:var(--accent-red);color:#fff;}
.btn-primary:hover{background:#9f0219;}
.btn-theme{background:var(--accent-gold);color:#000;}

/* Home Sections */
.home-section{margin:40px 0;}
.home-section h2{font-size:1.6rem;margin-bottom:12px;}
.home-section ul{list-style-type:disc;margin-left:20px;}
.social-links{display:flex;gap:12px;flex-wrap:wrap;margin-top:8px;}

/* Collection Controls */
.controls{display:flex;justify-content:center;gap:14px;flex-wrap:wrap;margin-top:16px;}
select{padding:10px 14px;border-radius:12px;border:none;font-weight:600;cursor:pointer;background:rgba(0,0,0,0.25);color:#fff;transition:0.3s;}
body.marine select{background:rgba(255,255,255,0.9);color:#000;}
select:focus{outline:2px solid var(--accent-gold);}

/* Card Grid */
.card-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(160px,1fr));gap:22px;padding:24px;}

/* Cards */
.card{perspective:1200px;cursor:pointer;opacity:0;transform:translateY(30px);transition:opacity 0.6s ease, transform 0.6s ease;position:relative;}
.card.show{opacity:1;transform:translateY(0);}
.card-inner{position:relative;width:100%;aspect-ratio:2/3;transform-style: preserve-3d;transition: transform 0.7s cubic-bezier(0.4,0,0.2,1);}
.card-front,.card-back{position:absolute;inset:0;border-radius:16px;backface-visibility:hidden;overflow:hidden;box-shadow:0 8px 20px rgba(0,0,0,0.35);transition: box-shadow 0.3s ease;}
.card-front img{width:100%;height:100%;object-fit:cover;border-radius:16px;}
.card-back{background:#fff;color:#000;transform:rotateY(180deg);padding:12px;font-size:12px;display:flex;flex-direction:column;justify-content:center;}

/* Card Name under image */
.card-name{margin-top:6px;font-size:0.9rem;text-align:center;font-weight:600;color:#fff;}
body.marine .card-name{color:#000;}

/* Rarity Highlights */
.rare{box-shadow:0 0 12px rgba(255,215,0,0.6);}
.super-rare{box-shadow:0 0 14px rgba(0,191,255,0.8);animation:glowPulse 2s infinite alternate ease-in-out;}
.secret-rare{box-shadow:0 0 18px rgba(255,0,255,0.9);animation:glowPulse 2s infinite alternate ease-in-out;}
@keyframes glowPulse{0%{transform:scale(1);}50%{transform:scale(1.03);}100%{transform:scale(1);}}

/* Borders */
.red{border:2px solid #e63946;}
.blue{border:2px solid #457b9d;}
.green{border:2px solid #2a9d8f;}
.purple{border:2px solid #8338ec;}
.yellow{border:2px solid #f4d35e;}
.golden{border:2px solid gold;}
.black{border:2px solid #000;}
.none{border:none;}

/* Flip only on desktop */
@media (min-width: 769px) {
  .card:hover .card-inner,
  .card.hovered .card-inner {transform: rotateY(180deg);}
}

/* Modal */
.modal{display:none;position:fixed;inset:0;background:rgba(0,0,0,0.85);z-index:9999;justify-content:center;align-items:center;overflow:auto;opacity:0;transition:opacity 0.4s ease;}
.modal-content{background:#fff;color:#000;max-width:900px;width:90%;margin:6vh auto;border-radius:16px;padding:0;display:flex;flex-direction:column;position:relative;overflow:hidden;}
.close-btn{position:absolute;top:12px;right:16px;font-size:28px;font-weight:bold;cursor:pointer;z-index:10;}

/* Modal body scroll together on mobile */
.modal-body{display:flex;flex-direction:row;overflow:hidden;touch-action:pan-y;transition:transform 0.4s ease;}
.modal-picture{flex:1;display:flex;justify-content:center;align-items:center;padding:16px;}
.modal-picture img{max-width:100%;max-height:100%;object-fit:contain;border-radius:12px;}
.modal-details{flex:1;padding:16px;font-size:14px;line-height:1.5;overflow-y:auto;}

/* Modal nav buttons */
.modal-details button{margin-top:12px;padding:8px 12px;border:none;border-radius:8px;background:#ff8c00;color:#fff;cursor:pointer;transition:0.3s;}
.modal-details button:hover{background:#e07b00;}
.modal-nav{display:flex;justify-content:space-between;margin-top:12px;}
.modal-nav button{padding:6px 10px;background:#457b9d;color:#fff;border:none;border-radius:6px;cursor:pointer;transition:0.3s;}
.modal-nav button:hover{background:#1d3557;}

/* Scroll Animation */
.scroll-animate{opacity:0;transform:translateY(30px);transition:opacity 0.6s ease, transform 0.6s ease;}
.scroll-animate.show{opacity:1;transform:translateY(0);}

/* Home & Collection Sections */
#home-page{display:block;}
#collection-page{display:none;}

/* Responsive */
@media(max-width:768px){
  .card-grid{grid-template-columns:repeat(auto-fill,minmax(140px,1fr));gap:16px;}
  .modal-body{flex-direction:column;overflow-y:auto;}
  .modal-picture, .modal-details{flex:none;width:100%;}
}
@media(max-width:480px){
  select,.btn{font-size:0.9rem;padding:8px 12px;}
  .home-header h1{font-size:clamp(1.8rem,5vw,2.4rem);}
  .home-header p{font-size:1rem;}
}
</style>
</head>
<body>

<!-- Home Page -->
<section id="home-page">
<header class="home-header">
<h1>Welcome to the Ultimate One Piece Card Collection!</h1>
<p>Explore rare, super rare, and secret rare cards from multiple sets. Flip cards, check details, copy links, and manage your own collection!</p>
<div class="header-btns">
<button class="btn btn-primary" onclick="showCollection()">Browse Collection</button>
<button id="themeToggle" class="btn btn-theme">Toggle Theme üè¥‚Äç‚ò†Ô∏è (Pirate)</button>
</div>
</header>
<main style="max-width:1000px;margin:0 auto;padding:20px;">
<section class="home-section">
<h2>What You Can Do</h2>
<ul>
<li>Browse cards from multiple sets with filtering by rarity and set.</li>
<li>View detailed card info including code, rarity, price, and abilities.</li>
<li>Copy individual card links for sharing with friends or forums.</li>
<li>Toggle between Pirate (dark) and Marine (light) themes for better viewing.</li>
</ul>
</section>
<section class="home-section">
<h2>Connect with Me</h2>
<p>Join me on social media or Discord to discuss cards and trades:</p>
<div class="social-links">
<a href="https://discord.com/" target="_blank" class="btn btn-primary">Discord</a>
<a href="https://www.facebook.com/" target="_blank" class="btn btn-primary">Facebook</a>
<a href="https://twitter.com/" target="_blank" class="btn btn-primary">X / Twitter</a>
</div>
</section>
<section class="home-section">
<h2>Start Exploring</h2>
<p>Click the button below to enter the collection and start exploring all cards:</p>
<button class="btn btn-theme" onclick="showCollection()">Go to Collection</button>
</section>
</main>
</section>

<!-- Collection Page -->
<section id="collection-page">
<header class="home-header">
<h1>My One Piece Card Collection</h1>
<div class="header-btns">
<button class="btn btn-primary" onclick="showHome()">üè† Home</button>
<button id="themeToggleCollection" class="btn btn-theme">Toggle Theme üè¥‚Äç‚ò†Ô∏è (Pirate)</button>
<button class="btn btn-theme" onclick="openRandomCard()">üé≤ Random Card</button>
</div>
<div class="controls">
<select id="rarityFilter">
<option value="all">All Rarities</option>
<option value="rare">Rare</option>
<option value="super rare">Super Rare</option>
<option value="secret rare">Secret Rare</option>
<option value="uncommon">Uncommon</option>
</select>
<select id="setFilter">
<option value="all">All Sets</option>
</select>
</div>
</header>
<main>
<div class="card-grid"></div>
</main>
</section>

<!-- Modal -->
<div class="modal" id="cardModal">
<div class="modal-content">
<span class="close-btn">&times;</span>
<div class="modal-body">
<div class="modal-picture"><img src="images/placeholder.jpg" alt="Card Image"></div>
<div class="modal-details"></div>
</div>
</div>
</div>

<script>
// ===== CARDS =====
const cards = [
  // Add all cards here like in your previous array...
];

// ===== PAGE SWITCHING =====
function showCollection(){document.getElementById("home-page").style.display="none";document.getElementById("collection-page").style.display="block";localStorage.setItem('lastPage','collection');}
function showHome(){document.getElementById("collection-page").style.display="none";document.getElementById("home-page").style.display="block";localStorage.setItem('lastPage','home');}

// ===== THEME TOGGLE =====
function setupThemeToggle(btnId){
  const btn=document.getElementById(btnId);
  if(!btn) return;
  btn.addEventListener("click",()=>{
    document.body.classList.toggle("marine");
    const isMarine=document.body.classList.contains("marine");
    btn.textContent=isMarine?"Toggle Theme üè¥‚Äç‚ò†Ô∏è (Marine)":"Toggle Theme üè¥‚Äç‚ò†Ô∏è (Pirate)";
    localStorage.setItem('theme',isMarine?'marine':'pirate');
  });
}
setupThemeToggle('themeToggle');
setupThemeToggle('themeToggleCollection');
if(localStorage.getItem('theme')==='marine') document.body.classList.add('marine');

// ===== CARD RENDERING =====
const grid=document.querySelector(".card-grid");
const rarityFilter=document.getElementById("rarityFilter");
const setFilter=document.getElementById("setFilter");
[...new Set(cards.map(c=>c.set))].forEach(s=>{const o=document.createElement("option"); o.value=s; o.textContent=s; setFilter.appendChild(o);});

function renderCards(){
  grid.innerHTML="";
  const r=rarityFilter.value; const s=setFilter.value;
  cards.filter(c=>(r==='all'||c.rarity.toLowerCase()===r)&&(s==='all'||c.set===s)).forEach((c,index)=>{
    const cardDiv=document.createElement("div");
    cardDiv.className="card scroll-animate";
    const rarityClass=c.rarity.toLowerCase().replace(' ','-');
    cardDiv.innerHTML=`
      <div class="card-inner ${rarityClass} ${c.border}">
        <div class="card-front">
          <img src="${c.image||'images/placeholder.jpg'}" alt="${c.name}">
        </div>
        <div class="card-back">
          <h3>${c.name}</h3>
          <p><strong>Code:</strong> ${c.code}</p>
          <p><strong>Rarity:</strong> ${c.rarity}</p>
          <p><strong>Price:</strong> $${c.price}</p>
        </div>
      </div>
      <div class="card-name">${c.name}</div>
    `;
    cardDiv.dataset.index=index;
    cardDiv.addEventListener("click",()=>openModal(index));
    grid.appendChild(cardDiv);
  });
  animateOnScroll();
}
rarityFilter.addEventListener("change",renderCards);
setFilter.addEventListener("change",renderCards);
renderCards();

// ===== MODAL =====
const modal=document.getElementById("cardModal");
const closeBtn=modal.querySelector(".close-btn");
let currentIndex=0;

function openModal(index){
  currentIndex=index;
  const card=cards[index];
  const modalBody=modal.querySelector(".modal-body");
  modalBody.style.transform='translateX(0)'; // reset animation
  modal.querySelector(".modal-picture img").src=card.image;
  modal.querySelector(".modal-details").innerHTML=`
    <h3>${card.name}</h3>
    <p><strong>Code:</strong> ${card.code}</p>
    <p><strong>Rarity:</strong> ${card.rarity}</p>
    <p><strong>Price:</strong> $${card.price}</p>
    <p>${card.description}</p>
    <div class="modal-nav">
      <button onclick="prevCard()">‚¨Ö Prev</button>
      <button onclick="copyCardLink()">Copy Link</button>
      <button onclick="nextCard()">Next ‚û°</button>
    </div>
  `;
  modal.style.display="flex"; setTimeout(()=>modal.style.opacity=1,50);
}

function prevCard(){currentIndex=(currentIndex-1+cards.length)%cards.length; slideModal(-1);}
function nextCard(){currentIndex=(currentIndex+1)%cards.length; slideModal(1);}
function openRandomCard(){openModal(Math.floor(Math.random()*cards.length));}
function copyCardLink(){navigator.clipboard.writeText(window.location.href.split('?')[0]+`?card=${currentIndex}`).then(()=>alert("Card link copied!"));}

function slideModal(direction){
  const modalBody=modal.querySelector(".modal-body");
  modalBody.style.transition='transform 0.3s ease';
  modalBody.style.transform=`translateX(${direction*100}%)`;
  setTimeout(()=>{
    openModal(currentIndex);
    modalBody.style.transition='none';
    modalBody.style.transform='translateX(0)';
  },300);
}

closeBtn.addEventListener("click",()=>{closeModal();});
window.addEventListener("click",(e)=>{if(e.target===modal){closeModal();}});
function closeModal(){modal.style.opacity=0;setTimeout(()=>modal.style.display="none",300);}
document.addEventListener("keydown",e=>{
  if(modal.style.display==="flex"){
    if(e.key==="ArrowLeft") prevCard();
    else if(e.key==="ArrowRight") nextCard();
    else if(e.key==="Escape") closeModal();
  }
});

// ===== TOUCH SWIPE FOR MOBILE =====
let startX=0,endX=0;
const swipeThreshold=50;
const modalBody=modal.querySelector(".modal-body");
modalBody.addEventListener("touchstart",e=>{startX=e.touches[0].clientX;});
modalBody.addEventListener("touchmove",e=>{endX=e.touches[0].clientX;});
modalBody.addEventListener("touchend",()=>{
  const diff=endX-startX;
  if(Math.abs(diff)>swipeThreshold){
    if(diff>0) prevCard();
    else nextCard();
  }
  startX=0; endX=0;
});

// ===== SCROLL ANIMATION =====
function animateOnScroll(){
  document.querySelectorAll(".scroll-animate").forEach(el=>{
    const observer=new IntersectionObserver(entries=>{entries.forEach(entry=>{if(entry.isIntersecting){entry.target.classList.add("show");observer.unobserve(entry.target);}});},{threshold:0.2});
    observer.observe(el);
  });
}

// ===== LOAD PAGE FROM URL OR LAST VISIT =====
window.addEventListener("DOMContentLoaded",()=>{
  const params=new URLSearchParams(window.location.search);
  const idx=params.get("card");
  if(idx!==null && !isNaN(idx)){
    showCollection();
    const index=parseInt(idx);
    if(cards[index]) openModal(index);
    const targetCard=document.querySelector(`.card[data-index='${index}']`);
    if(targetCard) targetCard.scrollIntoView({behavior:"smooth",block:"center"});
  } else {
    const lastPage=localStorage.getItem('lastPage');
    if(lastPage==='collection') showCollection();
    else showHome();
  }
});
</script>
</body>
</html>

